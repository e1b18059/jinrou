<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script>
    window.onload = function () {

      var sse = new EventSource('/time');
      sse.onmessage = function (event) {
        console.log(event.data);
        if (event.data == 0) {
          var vote = document.getElementById("voting");
          var script = "<a href = '/vote'>投票ページに移動する</a>";
          vote.innerHTML = script;
        }
        document.getElementById("timer").textContent = event.data + "秒";
      }
    }
  </script>
</head>

<body>
  <style>
    #timer {
      position: absolute;
      top: 70px;
      left: 100px;
      font-size: 70px;
    }
  </style>

  <div th:if="${hwin}">
    市民陣営の勝ちです!!!</br>
    <a href="/logout">ログアウト</a></br>
    <a href="/">最初の画面に戻る</a>
  </div>
  <div th:if="${jwin}">
    人狼陣営の勝ちです!!!</br>
    <a href="/logout">ログアウト</a></br>
    <a href="/">最初の画面に戻る</a>
  </div>
  <div th:if="${continue}">
    決着がつかなかったので議論を始めてください</br>
    <div th:if="${deathuser eq 1}">
      あなたは投票によって吊るされました。</br>
      ログアウトして下さい。</br>
      <a href="/logout">ログアウト</a>
    </div>
    <div th:if="${deathuser eq 2}">
      <div th:if="${rolename}">
        あなたは [[${username}]]「[[${rolename}]]」です
        <div th:if="${werewolf}">
          もう一人の人狼は[[${werewolf}]]です。
        </div>
      </div>
      <p id="timer"></p>
      <p id="voting"></p>

    </div>
  </div>
</body>

</html>
